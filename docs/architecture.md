# Моделирование системы

## Логическая модель данных

Диаграмма отражает весь комплекс сущностей, участвующих в процессе, включая меню с сезонным фактором, корзину, состав товаров, систему лояльности, возмодности оплаты и др.

![](diagrams/DataModel.png)

## Архитектура системы

Архитектурная диаграмма отражаеи все компоненты системы. За границей контура системы находятся компоненты с которыми система интегрирована для осуществления функци оплаты, складского хранения, уведомления, работы в рамках лояльности и проч.

![](diagrams/Architecture.png)

# Обоснование выбора архитектурного стиля и описание потоков

## Архитектурный стиль: Микросервисная архитектура

**Обоснование выбора:**

1. **Масштабируемость**:
   - Разные компоненты системы (аутентификация, обработка заказов, аналитика) могут масштабироваться независимо
   - Позволяет оптимально распределять ресурсы в зависимости от нагрузки

2. **Гибкость разработки**:
   - Возможность использовать разные технологии для разных сервисов
   - Независимое развертывание компонентов

3. **Отказоустойчивость**:
   - Изолированные сервисы минимизируют влияние сбоев
   - Возможность реализации индивидуальных стратегий восстановления

4. **Соответствие доменной модели**:
   - Четкое разделение по бизнес-возможностям (Bounded Contexts)
   - Каждый сервис отвечает за конкретную бизнес-функцию

## Описание потоков данных

### 1. Поток аутентификации
```mermaid
sequenceDiagram
    participant Клиент
    participant API_Gateway
    participant Auth_Service
    participant DB
    
    Клиент->>API_Gateway: POST /login (credentials)
    API_Gateway->>Auth_Service: Передает credentials
    Auth_Service->>DB: Проверка пользователя
    DB-->>Auth_Service: Данные пользователя
    Auth_Service-->>API_Gateway: JWT токен
    API_Gateway-->>Клиент: Возвращает токен

## Связи и последовательность работы

Связь и взаимодействие компонентов системы продемонстирована на рисунке ниже. Зеленым цветом обозначены логические границы системы
 
![](diagrams/Sequence_diagram.svg)

## Оплата заказа. Состояния и переходы

![](diagrams/State mashine.png)
